<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extended version of use_standalone that works with renv projects — use_standalone • pkgtools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extended version of use_standalone that works with renv projects — use_standalone"><meta property="og:description" content="usethis::use_standalone is a package development tool used in r-lib
to share useful functions between packages without creating a hard dependency
on them. This is also useful in data analysis projects where no package
infrastructure exists but you want to reuse common functions (e.g. plot themes)
between analysis projects. Developing a package containing these
shared functions and deploying to CRAN or r-universe but it is unwieldy and
requires more infrastructure that needed."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pkgtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/terminological/pkgtools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extended version of <code>use_standalone</code> that works with <code>renv</code> projects</h1>
    <small class="dont-index">Source: <a href="https://github.com/terminological/pkgtools/blob/HEAD/R/use_standalone.R" class="external-link"><code>R/use_standalone.R</code></a></small>
    <div class="hidden name"><code>use_standalone.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code><a href="https://usethis.r-lib.org/reference/use_standalone.html" class="external-link">usethis::use_standalone</a></code> is a package development tool used in <code>r-lib</code>
to share useful functions between packages without creating a hard dependency
on them. This is also useful in data analysis projects where no package
infrastructure exists but you want to reuse common functions (e.g. plot themes)
between analysis projects. Developing a package containing these
shared functions and deploying to <code>CRAN</code> or <code>r-universe</code> but it is unwieldy and
requires more infrastructure that needed.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">use_standalone</span><span class="op">(</span><span class="va">repo_spec</span>, file <span class="op">=</span> <span class="cn">NULL</span>, ref <span class="op">=</span> <span class="cn">NULL</span>, host <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>repo_spec</dt>
<dd><p>A string identifying the GitHub repo in one of these forms:</p><ul><li><p>Plain <code>OWNER/REPO</code> spec</p></li>
<li><p>Browser URL, such as <code>"https://github.com/OWNER/REPO"</code></p></li>
<li><p>HTTPS Git URL, such as <code>"https://github.com/OWNER/REPO.git"</code></p></li>
<li><p>SSH Git URL, such as <code>"git@github.com:OWNER/REPO.git"</code></p></li>
</ul></dd>


<dt>file</dt>
<dd><p>Name of standalone file. The <code>standalone-</code> prefix and file
extension are optional. If omitted, will allow you to choose from the
standalone files offered by that repo.</p></dd>


<dt>ref</dt>
<dd><p>The name of a branch, tag, or commit. By default, the file at
<code>path</code> will be copied from its current state in the repo's default branch.
This is extracted from <code>repo_spec</code> when user provides a URL.</p></dd>


<dt>host</dt>
<dd><p>GitHub host to target, passed to the <code>.api_url</code> argument of
<code><a href="https://gh.r-lib.org/reference/gh.html" class="external-link">gh::gh()</a></code>. If <code>repo_spec</code> is a URL, <code>host</code> is extracted from that.</p>
<p>If unspecified, gh defaults to "https://api.github.com", although gh's
default can be customised by setting the GITHUB_API_URL environment
variable.</p>
<p>For a hypothetical GitHub Enterprise instance, either
"https://github.acme.com/api/v3" or "https://github.acme.com" is
acceptable.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Using a standalone file we can develop these functions in a basic git
repository with no deployment (with or without package infrastructure), and
import them into a project as standalone files. From a reproducibility point
of view this is sometimes beneficial as the version is hard wired into the
analysis project.</p>
<p>The use cases supported by <code>usethis</code> are predicated around R package
development but here we extend this behaviour to analysis projects with
dependencies managed by <code>renv</code>.</p>
    </div>
    <div id="supported-fields">
    <h2>Supported fields</h2>
    



<p>A standalone file has YAML frontmatter that provides additional information,
such as where the file originates from and when it was last updated. Here is
an example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>repo<span class="sc">:</span> r<span class="sc">-</span>lib<span class="sc">/</span>rlang</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>file<span class="sc">:</span> standalone<span class="sc">-</span>types<span class="sc">-</span>check.R</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>last<span class="sc">-</span>updated<span class="sc">:</span> <span class="dv">2023-03-07</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>license<span class="sc">:</span> https<span class="sc">:</span><span class="er">//</span>unlicense.org</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>dependencies<span class="sc">:</span> standalone<span class="sc">-</span>obj<span class="sc">-</span>type.R</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>imports<span class="sc">:</span> <span class="fu">rlang</span> (<span class="sc">&gt;=</span> <span class="dv">1</span>.<span class="fl">1.0</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>Two of these fields are consulted by <span class="st">`</span><span class="at">use_standalone()</span><span class="st">`</span><span class="sc">:</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="sc">-</span> <span class="st">`</span><span class="at">dependencies</span><span class="st">`</span><span class="sc">:</span> A file or a list of files <span class="cf">in</span> the same repo that</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>  the standalone file depends on. These files are retrieved</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>  automatically by <span class="st">`</span><span class="at">use_standalone()</span><span class="st">`</span>.</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="sc">-</span> <span class="st">`</span><span class="at">imports</span><span class="st">`</span><span class="sc">:</span> A package or list of packages that the standalone file</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>   depends on. A minimal version may be specified <span class="cf">in</span> parentheses,</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>   e.g. <span class="st">`</span><span class="at">rlang (&gt;= 1.0.0)</span><span class="st">`</span>. These dependencies are passed to</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>   [<span class="fu">use_package</span>()] to ensure they are included <span class="cf">in</span> the <span class="st">`</span><span class="at">Imports:</span><span class="st">`</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>   field of the <span class="st">`</span><span class="at">DESCRIPTION</span><span class="st">`</span> file.</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>Note that lists are specified with standard YAML syntax, using</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>square brackets, <span class="cf">for</span> example<span class="sc">:</span> <span class="st">`</span><span class="at">imports: [rlang (&gt;= 1.0.0), purrr]</span><span class="st">`</span>.</span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>[<span class="fu">use_package</span>()]<span class="sc">:</span> R<span class="sc">:</span><span class="fu">use_package</span>()</span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>[<span class="fu">rlang</span> (<span class="sc">&gt;=</span> <span class="dv">1</span>.<span class="fl">0.0</span>), purrr]<span class="sc">:</span> R<span class="sc">:</span>rlang<span class="sc">%20(%</span>3E<span class="ot">=</span><span class="sc">%201.0.0),%</span>20purrr</span></code></pre><p></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">use_standalone</span><span class="op">(</span><span class="st">"r-lib/rlang"</span>, file <span class="op">=</span> <span class="st">"types-check"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">use_standalone</span><span class="op">(</span><span class="st">"r-lib/rlang"</span>, file <span class="op">=</span> <span class="st">"types-check"</span>, ref <span class="op">=</span> <span class="st">"standalone-dep"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

